<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SearchMaterial &mdash; WasteAndMaterialFootprint 0.1.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=92734c54"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MakeCustomDatabase" href="MakeCustomDatabase.html" />
    <link rel="prev" title="SearchWaste" href="SearchWaste.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            WasteAndMaterialFootprint
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration modules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">WasteAndMaterialFootprint Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="FutureScenarios.html">FutureScenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="ExplodeDatabase.html">ExplodeDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="SearchWaste.html">SearchWaste</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SearchMaterial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#functionality">Functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="#search-queries">Search queries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="MakeCustomDatabase.html">MakeCustomDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="MethodEditor.html">MethodEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="ExchangeEditor.html">ExchangeEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="VerifyDatabase.html">VerifyDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#futurescenarios">FutureScenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#explodedatabase">ExplodeDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#searchwaste">SearchWaste</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#searchmaterial">SearchMaterial</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#makecustomdatabase">MakeCustomDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#methodeditor">MethodEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#exchangeeditor">ExchangeEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#verifydatabase">VerifyDatabase</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules_api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules_api.html#configuration">Configuration</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">WasteAndMaterialFootprint</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">WasteAndMaterialFootprint Modules</a></li>
      <li class="breadcrumb-item active">SearchMaterial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/SearchMaterial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="searchmaterial">
<h1>SearchMaterial<a class="headerlink" href="#searchmaterial" title="Link to this heading"></a></h1>
<p>The SearchMaterial module’s primary function is to load data from ‘&lt; db name &gt;_exploded.pickle’, execute search queries based on the list of materials, and store the results in a CSV file along with a corresponding log entry. The search queries are formatted as tuples, where the first entry is the name of the activity and the second is the material grouping, e.g. <cite>(“market for sodium borates”, “borates”)</cite>. These queries are defined by the list in <cite>queries_materials.py</cite>, which can be easily modified by the user to change the scope or the groupings as desired.</p>
<section id="functionality">
<h2>Functionality<a class="headerlink" href="#functionality" title="Link to this heading"></a></h2>
<p>The module’s core function, <code class="xref py py-func docutils literal notranslate"><span class="pre">SearchMaterial()</span></code>, takes a database name and a Brightway2 project as inputs. It
searches for materials within the specified database, extracts relevant information such as ISIC and CPC
classifications, and saves this information in CSV format. It also extracts and saves related material exchanges and saves them as separate files based on the material grouping. The files are used by the subsequent modules to edit the exchanges and to produce LCIA methods.</p>
</section>
<section id="search-queries">
<h2>Search queries<a class="headerlink" href="#search-queries" title="Link to this heading"></a></h2>
<p>The module <cite>queries_material.py</cite> contains the list of materials used to create demand methods in the WasteAndMaterialFootprint tool.
The materials are chosen to match activities in the ecoinvent v3.9.1 database and future databases made with
premise, and to align with the EU CRM list 2023. Additional strategic materials are included, along with some other
materials of interest.</p>
<p>NOTE: The search function in <cite>SearchMaterial.py</cite> uses <cite>str.startswith</cite>, finding all activities that start with the material name.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filter activities based on the materials list</span>
<span class="n">acts_all</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">db</span><span class="p">])</span>
<span class="n">materials_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">queries_materials</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;group&quot;</span><span class="p">])</span>

<span class="n">acts</span> <span class="o">=</span> <span class="n">acts_all</span><span class="p">[</span>
    <span class="n">acts_all</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">any</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">material</span><span class="p">)</span> <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="n">materials_df</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The comma in material names is crucial for filtering specific activities in the database. For example,
with the comma, the query  <cite>market for gold,</cite> will catch the activity <cite>market for nickel</cite> and <cite>market for nickel, 90%</cite> but not <cite>market for nickel plating</cite>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">queries_materials</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;market for aluminium&quot;</span><span class="p">,</span> <span class="s2">&quot;aluminium&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;market for antimony&quot;</span><span class="p">,</span> <span class="s2">&quot;antimony&quot;</span><span class="p">),</span>
    <span class="c1"># ... [rest of the list] ...</span>
    <span class="p">(</span><span class="s2">&quot;market for zirconium&quot;</span><span class="p">,</span> <span class="s2">&quot;zirconium&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="SearchWaste.html" class="btn btn-neutral float-left" title="SearchWaste" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="MakeCustomDatabase.html" class="btn btn-neutral float-right" title="MakeCustomDatabase" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Stewart Charles McDowall | Stew-McD.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>