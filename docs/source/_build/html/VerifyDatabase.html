<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VerifyDatabase &mdash; WasteAndMaterialFootprint 0.1.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/documentation_options.js?v=92734c54"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="ExchangeEditor" href="ExchangeEditor.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            WasteAndMaterialFootprint
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">WMF Program Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="FutureScenarios.html">FutureScenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="ExplodeDatabase.html">ExplodeDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="SearchWaste.html">SearchWaste</a></li>
<li class="toctree-l2"><a class="reference internal" href="SearchMaterial.html">SearchMaterial</a></li>
<li class="toctree-l2"><a class="reference internal" href="MakeCustomDatabase.html">MakeCustomDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="MethodEditor.html">MethodEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="ExchangeEditor.html">ExchangeEditor</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">VerifyDatabase</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#function-summary">Function Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#futurescenarios">FutureScenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#explodedatabase">ExplodeDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#searchwaste">SearchWaste</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#searchmaterial">SearchMaterial</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#makecustomdatabase">MakeCustomDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#methodeditor">MethodEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#exchangeeditor">ExchangeEditor</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#verifydatabase">VerifyDatabase</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules_api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules_api.html#configuration">Configuration</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">WasteAndMaterialFootprint</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">WMF Program Modules</a></li>
      <li class="breadcrumb-item active">VerifyDatabase</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/VerifyDatabase.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="verifydatabase">
<h1>VerifyDatabase<a class="headerlink" href="#verifydatabase" title="Link to this heading"></a></h1>
<p class="linemarker linemarker-4">The VerifyDatabase module contains functionality for verifying an edited WMF database within a given project in Brightway2. It performs this verification by calculating LCA scores for random activities within the specified database using selected methods.</p>
<section id="function-summary">
<h2>Function Summary<a class="headerlink" href="#function-summary" title="Link to this heading"></a></h2>
<ul>
<li><p class="linemarker linemarker-9"><strong>`VerifyDatabase`</strong>: This function verifies a database within a Brightway2 project by calculating LCA scores
for random activities using Waste Footprint and Material Demand Footprint methods. Since it is not expected that every activity and method combination would result in a non-zero score, the function allows users to specify the number of activities and methods to be used in the verification process. The function also allows users to specify whether they want to check the Waste Footprint, Material Demand Footprint, or both.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">VerifyDatabase</span><span class="p">(</span><span class="n">project_name</span><span class="p">,</span> <span class="n">database_name</span><span class="p">,</span> <span class="n">check_material</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check_waste</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="c1"># ... snippet to show verification process ... #</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">** Verifying database </span><span class="si">{</span><span class="n">database_name</span><span class="si">}</span><span class="s2"> in project </span><span class="si">{</span><span class="n">project_name</span><span class="si">}</span><span class="s2"> **</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Loop until a non-zero score is obtained</span>
    <span class="k">while</span> <span class="n">lca_score</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="c1"># Get a random activity from the database</span>
            <span class="n">act</span> <span class="o">=</span> <span class="n">bd</span><span class="o">.</span><span class="n">Database</span><span class="p">(</span><span class="n">database_name</span><span class="p">)</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>

            <span class="c1"># Initialize the list of methods</span>
            <span class="n">methods</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="c1"># Find methods related to Waste Footprint</span>
            <span class="k">if</span> <span class="n">check_waste</span><span class="p">:</span>
                <span class="n">methods_waste</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">methods</span> <span class="k">if</span> <span class="s2">&quot;Waste&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                <span class="n">methods</span> <span class="o">+=</span> <span class="n">methods_waste</span>

            <span class="c1"># Find methods related to Material Demand Footprint</span>
            <span class="k">if</span> <span class="n">check_material</span><span class="p">:</span>
                <span class="n">methods_material</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bd</span><span class="o">.</span><span class="n">methods</span> <span class="k">if</span> <span class="s2">&quot;Demand&quot;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                <span class="n">methods</span> <span class="o">+=</span> <span class="n">methods_material</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">check_waste</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">check_material</span><span class="p">:</span>
                <span class="n">method</span> <span class="o">=</span> <span class="n">bd</span><span class="o">.</span><span class="n">methods</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
                <span class="n">methods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>

            <span class="c1"># Choose a random method</span>
            <span class="n">method</span> <span class="o">=</span> <span class="n">choice</span><span class="p">(</span><span class="n">methods</span><span class="p">)</span>

            <span class="c1"># Perform LCA calculation</span>
            <span class="n">lca</span> <span class="o">=</span> <span class="n">bc</span><span class="o">.</span><span class="n">LCA</span><span class="p">({</span><span class="n">act</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">method</span><span class="p">)</span>
            <span class="n">lca</span><span class="o">.</span><span class="n">lci</span><span class="p">()</span>
            <span class="n">lca</span><span class="o">.</span><span class="n">lcia</span><span class="p">()</span>

            <span class="c1"># Get the lca score</span>
            <span class="n">lca_score</span> <span class="o">=</span> <span class="n">lca</span><span class="o">.</span><span class="n">score</span>

            <span class="c1"># Print the result</span>
            <span class="n">log_statement</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Score: </span><span class="si">{</span><span class="n">lca_score</span><span class="si">:</span><span class="s2">2.2e</span><span class="si">}</span><span class="s2"> </span><span class="se">\n\t</span><span class="s2">Method: </span><span class="si">{</span><span class="n">method</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">\n\t</span><span class="s2">Activity: </span><span class="si">{</span><span class="n">act</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">\n\t</span><span class="s2">Database: </span><span class="si">{</span><span class="n">database_name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Print any errors that occur</span>
            <span class="n">log_statement</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;@@@@@@@@  Error occurred with &#39;</span><span class="si">{</span><span class="n">database_name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">! @@@@@@@@&quot;</span>
            <span class="p">)</span>

    <span class="c1"># ...  end snippet ... #</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<p class="linemarker linemarker-68">This function is called automatically after each database is processed, and again after all databases have been processed. The function can also be called manually by the user by invoking the following command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">wmf</span><span class="o">.</span><span class="n">VerifyDatabase</span><span class="p">(</span><span class="n">project_name</span><span class="p">,</span> <span class="n">database_name</span><span class="p">,</span> <span class="n">check_material</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check_waste</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ExchangeEditor.html" class="btn btn-neutral float-left" title="ExchangeEditor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Stewart Charles McDowall | Stew-McD.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>